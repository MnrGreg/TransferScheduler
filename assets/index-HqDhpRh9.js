import{f as xe,v as en,k as S,h as G,i as U,t as V,j as L,l as nn,m as tn,d as m,n as B}from"./index-DEAazlHc.js";function an(e){const{domain:n={},message:t,primaryType:i}=e,o={EIP712Domain:xe({domain:n}),...e.types};en({domain:n,message:t,primaryType:i,types:o});const a=["0x1901"];return n&&a.push(sn({domain:n,types:o})),i!=="EIP712Domain"&&a.push(j({data:t,primaryType:i,types:o})),S(G(a))}function sn({domain:e,types:n}){return j({data:e,primaryType:"EIP712Domain",types:n})}function j({data:e,primaryType:n,types:t}){const i=W({data:e,primaryType:n,types:t});return S(i)}function W({data:e,primaryType:n,types:t}){const i=[{type:"bytes32"}],o=[cn({primaryType:n,types:t})];for(const a of t[n]){const[d,l]=k({types:t,name:a.name,type:a.type,value:e[a.name]});i.push(d),o.push(l)}return U(i,o)}function cn({primaryType:e,types:n}){const t=V(on({primaryType:e,types:n}));return S(t)}function on({primaryType:e,types:n}){let t="";const i=q({primaryType:e,types:n});i.delete(e);const o=[e,...Array.from(i).sort()];for(const a of o)t+=`${a}(${n[a].map(({name:d,type:l})=>`${l} ${d}`).join(",")})`;return t}function q({primaryType:e,types:n},t=new Set){const i=e.match(/^\w*/u),o=i==null?void 0:i[0];if(t.has(o)||n[o]===void 0)return t;t.add(o);for(const a of n[o])q({primaryType:a.type,types:n},t);return t}function k({types:e,name:n,type:t,value:i}){if(e[t]!==void 0)return[{type:"bytes32"},S(W({data:i,primaryType:t,types:e}))];if(t==="bytes")return i=`0x${(i.length%2?"0":"")+i.slice(2)}`,[{type:"bytes32"},S(i)];if(t==="string")return[{type:"bytes32"},S(V(i))];if(t.lastIndexOf("]")===t.length-1){const o=t.slice(0,t.lastIndexOf("[")),a=i.map(d=>k({name:n,type:o,types:e,value:d}));return[{type:"bytes32"},S(U(a.map(([d])=>d),a.map(([,d])=>d)))]}return[{type:t},i]}const rn=`Ethereum Signed Message:
`;function dn(e){const n=typeof e=="string"?L(e):typeof e.raw=="string"?e.raw:nn(e.raw),t=L(`${rn}${tn(n)}`);return G([t,n])}function un(e,n){return S(dn(e),n)}const F=()=>"9.1.0",ln=e=>e.toString(16).padStart(2,"0"),fn=e=>{const n=new Uint8Array(e/2);return window.crypto.getRandomValues(n),Array.from(n,ln).join("")},gn=()=>typeof window<"u"?fn(10):new Date().getTime().toString(36);class C{}C.makeRequest=(e,n)=>({id:gn(),method:e,params:n,env:{sdkVersion:F()}});C.makeResponse=(e,n,t)=>({id:e,success:!0,version:t,data:n});C.makeErrorResponse=(e,n,t)=>({id:e,success:!1,error:n,version:t});var f;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(f||(f={}));var b;(function(e){e.requestAddressBook="requestAddressBook"})(b||(b={}));class hn{constructor(n=null,t=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:i,data:o,source:a})=>{const d=!o,l=!this.isServer&&a===window.parent,h=typeof o.version<"u"&&parseInt(o.version.split(".")[0]),v=typeof h=="number"&&h>=1;let E=!0;return Array.isArray(this.allowedOrigins)&&(E=this.allowedOrigins.find(y=>y.test(i))!==void 0),!d&&l&&v&&E},this.logIncomingMessage=i=>{console.info(`Safe Apps SDK v1: A message was received from origin ${i.origin}. `,i.data)},this.onParentMessage=i=>{this.isValidMessage(i)&&(this.debugMode&&this.logIncomingMessage(i),this.handleIncomingMessage(i.data))},this.handleIncomingMessage=i=>{const{id:o}=i,a=this.callbacks.get(o);a&&(a(i),this.callbacks.delete(o))},this.send=(i,o)=>{const a=C.makeRequest(i,o);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(a,"*"),new Promise((d,l)=>{this.callbacks.set(a.id,h=>{if(!h.success){l(new Error(h.error));return}d(h)})})},this.allowedOrigins=n,this.debugMode=t,this.isServer||window.addEventListener("message",this.onParentMessage)}}const w=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;var N={},T={},I={},M=m&&m.__awaiter||function(e,n,t,i){function o(a){return a instanceof t?a:new t(function(d){d(a)})}return new(t||(t=Promise))(function(a,d){function l(E){try{v(i.next(E))}catch(y){d(y)}}function h(E){try{v(i.throw(E))}catch(y){d(y)}}function v(E){E.done?a(E.value):o(E.value).then(l,h)}v((i=i.apply(e,n||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.getData=I.fetchData=I.stringifyQuery=I.insertParams=void 0;const En=e=>typeof e=="object"&&e!==null&&"code"in e&&"message"in e;function _n(e,n,t){return e.replace(new RegExp(`\\{${n}\\}`,"g"),t)}function Tn(e,n){return n?Object.keys(n).reduce((t,i)=>_n(t,i,String(n[i])),e):e}I.insertParams=Tn;function In(e){if(!e)return"";const n=new URLSearchParams;Object.keys(e).forEach(i=>{e[i]!=null&&n.append(i,String(e[i]))});const t=n.toString();return t?`?${t}`:""}I.stringifyQuery=In;function K(e){return M(this,void 0,void 0,function*(){let n;try{n=yield e.json()}catch{n={}}if(!e.ok){const t=En(n)?`CGW error - ${n.code}: ${n.message}`:`CGW error - status ${e.statusText}`;throw new Error(t)}return n})}function An(e,n,t,i,o){return M(this,void 0,void 0,function*(){const a=Object.assign({"Content-Type":"application/json"},i),d={method:n??"POST",headers:a};o&&(d.credentials=o),t!=null&&(d.body=typeof t=="string"?t:JSON.stringify(t));const l=yield fetch(e,d);return K(l)})}I.fetchData=An;function Sn(e,n,t){return M(this,void 0,void 0,function*(){const i={method:"GET"};n&&(i.headers=Object.assign(Object.assign({},n),{"Content-Type":"application/json"})),t&&(i.credentials=t);const o=yield fetch(e,i);return K(o)})}I.getData=Sn;Object.defineProperty(T,"__esModule",{value:!0});T.getEndpoint=T.deleteEndpoint=T.putEndpoint=T.postEndpoint=void 0;const O=I;function R(e,n,t,i){const o=(0,O.insertParams)(n,t),a=(0,O.stringifyQuery)(i);return`${e}${o}${a}`}function vn(e,n,t){const i=R(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.fetchData)(i,"POST",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}T.postEndpoint=vn;function yn(e,n,t){const i=R(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.fetchData)(i,"PUT",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}T.putEndpoint=yn;function On(e,n,t){const i=R(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.fetchData)(i,"DELETE",t==null?void 0:t.body,t==null?void 0:t.headers,t==null?void 0:t.credentials)}T.deleteEndpoint=On;function mn(e,n,t,i){if(i)return(0,O.getData)(i,void 0,t==null?void 0:t.credentials);const o=R(e,n,t==null?void 0:t.path,t==null?void 0:t.query);return(0,O.getData)(o,t==null?void 0:t.headers,t==null?void 0:t.credentials)}T.getEndpoint=mn;var p={};Object.defineProperty(p,"__esModule",{value:!0});p.DEFAULT_BASE_URL=void 0;p.DEFAULT_BASE_URL="https://safe-client.safe.global";var X={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationVersionState=void 0,function(n){n.UP_TO_DATE="UP_TO_DATE",n.OUTDATED="OUTDATED",n.UNKNOWN="UNKNOWN"}(e.ImplementationVersionState||(e.ImplementationVersionState={}))})(X);var $={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppSocialPlatforms=e.SafeAppFeatures=e.SafeAppAccessPolicyTypes=void 0,function(n){n.NoRestrictions="NO_RESTRICTIONS",n.DomainAllowlist="DOMAIN_ALLOWLIST"}(e.SafeAppAccessPolicyTypes||(e.SafeAppAccessPolicyTypes={})),function(n){n.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"}(e.SafeAppFeatures||(e.SafeAppFeatures={})),function(n){n.TWITTER="TWITTER",n.GITHUB="GITHUB",n.DISCORD="DISCORD"}(e.SafeAppSocialPlatforms||(e.SafeAppSocialPlatforms={}))})($);var Q={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LabelValue=e.StartTimeValue=e.DurationType=e.DetailedExecutionInfoType=e.TransactionListItemType=e.ConflictType=e.TransactionInfoType=e.SettingsInfoType=e.TransactionTokenType=e.TransferDirection=e.TransactionStatus=e.Operation=void 0,function(n){n[n.CALL=0]="CALL",n[n.DELEGATE=1]="DELEGATE"}(e.Operation||(e.Operation={})),function(n){n.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",n.AWAITING_EXECUTION="AWAITING_EXECUTION",n.CANCELLED="CANCELLED",n.FAILED="FAILED",n.SUCCESS="SUCCESS"}(e.TransactionStatus||(e.TransactionStatus={})),function(n){n.INCOMING="INCOMING",n.OUTGOING="OUTGOING",n.UNKNOWN="UNKNOWN"}(e.TransferDirection||(e.TransferDirection={})),function(n){n.ERC20="ERC20",n.ERC721="ERC721",n.NATIVE_COIN="NATIVE_COIN"}(e.TransactionTokenType||(e.TransactionTokenType={})),function(n){n.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",n.ADD_OWNER="ADD_OWNER",n.REMOVE_OWNER="REMOVE_OWNER",n.SWAP_OWNER="SWAP_OWNER",n.CHANGE_THRESHOLD="CHANGE_THRESHOLD",n.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",n.ENABLE_MODULE="ENABLE_MODULE",n.DISABLE_MODULE="DISABLE_MODULE",n.SET_GUARD="SET_GUARD",n.DELETE_GUARD="DELETE_GUARD"}(e.SettingsInfoType||(e.SettingsInfoType={})),function(n){n.TRANSFER="Transfer",n.SETTINGS_CHANGE="SettingsChange",n.CUSTOM="Custom",n.CREATION="Creation",n.SWAP_ORDER="SwapOrder",n.TWAP_ORDER="TwapOrder",n.SWAP_TRANSFER="SwapTransfer",n.NATIVE_STAKING_DEPOSIT="NativeStakingDeposit",n.NATIVE_STAKING_VALIDATORS_EXIT="NativeStakingValidatorsExit",n.NATIVE_STAKING_WITHDRAW="NativeStakingWithdraw"}(e.TransactionInfoType||(e.TransactionInfoType={})),function(n){n.NONE="None",n.HAS_NEXT="HasNext",n.END="End"}(e.ConflictType||(e.ConflictType={})),function(n){n.TRANSACTION="TRANSACTION",n.LABEL="LABEL",n.CONFLICT_HEADER="CONFLICT_HEADER",n.DATE_LABEL="DATE_LABEL"}(e.TransactionListItemType||(e.TransactionListItemType={})),function(n){n.MULTISIG="MULTISIG",n.MODULE="MODULE"}(e.DetailedExecutionInfoType||(e.DetailedExecutionInfoType={})),function(n){n.AUTO="AUTO",n.LIMIT_DURATION="LIMIT_DURATION"}(e.DurationType||(e.DurationType={})),function(n){n.AT_MINING_TIME="AT_MINING_TIME",n.AT_EPOCH="AT_EPOCH"}(e.StartTimeValue||(e.StartTimeValue={})),function(n){n.Queued="Queued",n.Next="Next"}(e.LabelValue||(e.LabelValue={}))})(Q);var Y={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FEATURES=e.GAS_PRICE_TYPE=e.RPC_AUTHENTICATION=void 0,function(n){n.API_KEY_PATH="API_KEY_PATH",n.NO_AUTHENTICATION="NO_AUTHENTICATION",n.UNKNOWN="UNKNOWN"}(e.RPC_AUTHENTICATION||(e.RPC_AUTHENTICATION={})),function(n){n.ORACLE="ORACLE",n.FIXED="FIXED",n.FIXED_1559="FIXED1559",n.UNKNOWN="UNKNOWN"}(e.GAS_PRICE_TYPE||(e.GAS_PRICE_TYPE={})),function(n){n.ERC721="ERC721",n.SAFE_APPS="SAFE_APPS",n.CONTRACT_INTERACTION="CONTRACT_INTERACTION",n.DOMAIN_LOOKUP="DOMAIN_LOOKUP",n.SPENDING_LIMIT="SPENDING_LIMIT",n.EIP1559="EIP1559",n.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",n.TX_SIMULATION="TX_SIMULATION",n.EIP1271="EIP1271"}(e.FEATURES||(e.FEATURES={}))})(Y);var z={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0,function(n){n.ERC20="ERC20",n.ERC721="ERC721",n.NATIVE_TOKEN="NATIVE_TOKEN"}(e.TokenType||(e.TokenType={}))})(z);var J={};Object.defineProperty(J,"__esModule",{value:!0});var Z={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NativeStakingStatus=e.ConfirmationViewTypes=void 0,function(n){n.GENERIC="GENERIC",n.COW_SWAP_ORDER="COW_SWAP_ORDER",n.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER",n.KILN_NATIVE_STAKING_DEPOSIT="KILN_NATIVE_STAKING_DEPOSIT",n.KILN_NATIVE_STAKING_VALIDATORS_EXIT="KILN_NATIVE_STAKING_VALIDATORS_EXIT",n.KILN_NATIVE_STAKING_WITHDRAW="KILN_NATIVE_STAKING_WITHDRAW"}(e.ConfirmationViewTypes||(e.ConfirmationViewTypes={})),function(n){n.NOT_STAKED="NOT_STAKED",n.ACTIVATING="ACTIVATING",n.DEPOSIT_IN_PROGRESS="DEPOSIT_IN_PROGRESS",n.ACTIVE="ACTIVE",n.EXIT_REQUESTED="EXIT_REQUESTED",n.EXITING="EXITING",n.EXITED="EXITED",n.SLASHED="SLASHED"}(e.NativeStakingStatus||(e.NativeStakingStatus={}))})(Z);var x={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeMessageStatus=e.SafeMessageListItemType=void 0,function(n){n.DATE_LABEL="DATE_LABEL",n.MESSAGE="MESSAGE"}(e.SafeMessageListItemType||(e.SafeMessageListItemType={})),function(n){n.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",n.CONFIRMED="CONFIRMED"}(e.SafeMessageStatus||(e.SafeMessageStatus={}))})(x);var ee={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceType=void 0,function(n){n.ANDROID="ANDROID",n.IOS="IOS",n.WEB="WEB"}(e.DeviceType||(e.DeviceType={}))})(ee);var ne={};Object.defineProperty(ne,"__esModule",{value:!0});(function(e){var n=m&&m.__createBinding||(Object.create?function(s,c,r,u){u===void 0&&(u=r);var _=Object.getOwnPropertyDescriptor(c,r);(!_||("get"in _?!c.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return c[r]}}),Object.defineProperty(s,u,_)}:function(s,c,r,u){u===void 0&&(u=r),s[u]=c[r]}),t=m&&m.__exportStar||function(s,c){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(c,r)&&n(c,s,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.getAccount=e.createAccount=e.verifyAuth=e.getAuthNonce=e.getContract=e.getSafeOverviews=e.unsubscribeAll=e.unsubscribeSingle=e.registerRecoveryModule=e.deleteRegisteredEmail=e.getRegisteredEmail=e.verifyEmail=e.resendEmailVerificationCode=e.changeEmail=e.registerEmail=e.unregisterDevice=e.unregisterSafe=e.registerDevice=e.getDelegates=e.confirmSafeMessage=e.proposeSafeMessage=e.getSafeMessage=e.getSafeMessages=e.getDecodedData=e.getMasterCopies=e.getSafeApps=e.getChainConfig=e.getChainsConfig=e.getTxPreview=e.getConfirmationView=e.proposeTransaction=e.getNonces=e.postSafeGasEstimation=e.deleteTransaction=e.getTransactionDetails=e.getTransactionQueue=e.getTransactionHistory=e.getCollectiblesPage=e.getCollectibles=e.getAllOwnedSafes=e.getOwnedSafes=e.getFiatCurrencies=e.getBalances=e.getMultisigTransactions=e.getModuleTransactions=e.getIncomingTransfers=e.getSafeInfo=e.getRelayCount=e.relayTransaction=e.setBaseUrl=void 0,e.getIndexingStatus=e.putAccountDataSettings=e.getAccountDataSettings=e.getAccountDataTypes=e.deleteAccount=void 0;const i=T,o=p;t(X,e),t($,e),t(Q,e),t(Y,e),t(z,e),t(J,e),t(Z,e),t(x,e),t(ee,e),t(ne,e);let a=o.DEFAULT_BASE_URL;const d=s=>{a=s};e.setBaseUrl=d;function l(s,c){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/relay",{path:{chainId:s},body:c})}e.relayTransaction=l;function h(s,c){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:s,address:c}})}e.getRelayCount=h;function v(s,c){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:s,address:c}})}e.getSafeInfo=v;function E(s,c,r,u){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:s,address:c},query:r},u)}e.getIncomingTransfers=E;function y(s,c,r,u){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:s,address:c},query:r},u)}e.getModuleTransactions=y;function ae(s,c,r,u){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:s,address:c},query:r},u)}e.getMultisigTransactions=ae;function se(s,c,r="usd",u={}){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:s,address:c,currency:r},query:u})}e.getBalances=se;function ce(){return(0,i.getEndpoint)(a,"/v1/balances/supported-fiat-codes")}e.getFiatCurrencies=ce;function oe(s,c){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:s,address:c}})}e.getOwnedSafes=oe;function re(s){return(0,i.getEndpoint)(a,"/v1/owners/{address}/safes",{path:{address:s}})}e.getAllOwnedSafes=re;function de(s,c,r={}){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:s,address:c},query:r})}e.getCollectibles=de;function ue(s,c,r={},u){return(0,i.getEndpoint)(a,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:s,address:c},query:r},u)}e.getCollectiblesPage=ue;function le(s,c,r={},u){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:s,safe_address:c},query:r},u)}e.getTransactionHistory=le;function fe(s,c,r={},u){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:s,safe_address:c},query:r},u)}e.getTransactionQueue=fe;function ge(s,c){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:s,transactionId:c}})}e.getTransactionDetails=ge;function he(s,c,r){return(0,i.deleteEndpoint)(a,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:s,safeTxHash:c},body:{signature:r}})}e.deleteTransaction=he;function Ee(s,c,r){return(0,i.postEndpoint)(a,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:s,safe_address:c},body:r})}e.postSafeGasEstimation=Ee;function _e(s,c){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:s,safe_address:c}})}e.getNonces=_e;function Te(s,c,r){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:s,safe_address:c},body:r})}e.proposeTransaction=Te;function Ie(s,c,r,u,_){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:s,safe_address:c},body:{data:r,to:u,value:_}})}e.getConfirmationView=Ie;function Ae(s,c,r,u,_){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/transactions/{safe_address}/preview",{path:{chainId:s,safe_address:c},body:{data:r,to:u,value:_}})}e.getTxPreview=Ae;function Se(s){return(0,i.getEndpoint)(a,"/v1/chains",{query:s})}e.getChainsConfig=Se;function ve(s){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}",{path:{chainId:s}})}e.getChainConfig=ve;function ye(s,c={}){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safe-apps",{path:{chainId:s},query:c})}e.getSafeApps=ye;function Oe(s){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:s}})}e.getMasterCopies=Oe;function me(s,c,r){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/data-decoder",{path:{chainId:s},body:{data:c,to:r}})}e.getDecodedData=me;function Ne(s,c,r){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:s,safe_address:c},query:{}},r)}e.getSafeMessages=Ne;function De(s,c){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:s,message_hash:c}})}e.getSafeMessage=De;function Ce(s,c,r){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:s,safe_address:c},body:r})}e.proposeSafeMessage=Ce;function be(s,c,r){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:s,message_hash:c},body:r})}e.confirmSafeMessage=be;function Re(s,c={}){return(0,i.getEndpoint)(a,"/v2/chains/{chainId}/delegates",{path:{chainId:s},query:c})}e.getDelegates=Re;function pe(s){return(0,i.postEndpoint)(a,"/v1/register/notifications",{body:s})}e.registerDevice=pe;function Pe(s,c,r){return(0,i.deleteEndpoint)(a,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:s,safe_address:c,uuid:r}})}e.unregisterSafe=Pe;function we(s,c){return(0,i.deleteEndpoint)(a,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:s,uuid:c}})}e.unregisterDevice=we;function Me(s,c,r,u){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:s,safe_address:c},body:r,headers:u})}e.registerEmail=Me;function Le(s,c,r,u,_){return(0,i.putEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:s,safe_address:c,signer:r},body:u,headers:_})}e.changeEmail=Le;function Be(s,c,r){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:s,safe_address:c,signer:r},body:""})}e.resendEmailVerificationCode=Be;function He(s,c,r,u){return(0,i.putEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:s,safe_address:c,signer:r},body:u})}e.verifyEmail=He;function Ge(s,c,r,u){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:s,safe_address:c,signer:r},headers:u})}e.getRegisteredEmail=Ge;function Ue(s,c,r,u){return(0,i.deleteEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:s,safe_address:c,signer:r},headers:u})}e.deleteRegisteredEmail=Ue;function Ve(s,c,r){return(0,i.postEndpoint)(a,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:s,safe_address:c},body:r})}e.registerRecoveryModule=Ve;function je(s){return(0,i.deleteEndpoint)(a,"/v1/subscriptions",{query:s})}e.unsubscribeSingle=je;function We(s){return(0,i.deleteEndpoint)(a,"/v1/subscriptions/all",{query:s})}e.unsubscribeAll=We;function qe(s,c){return(0,i.getEndpoint)(a,"/v1/safes",{query:Object.assign(Object.assign({},c),{safes:s.join(",")})})}e.getSafeOverviews=qe;function ke(s,c){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:s,contractAddress:c}})}e.getContract=ke;function Fe(){return(0,i.getEndpoint)(a,"/v1/auth/nonce",{credentials:"include"})}e.getAuthNonce=Fe;function Ke(s){return(0,i.postEndpoint)(a,"/v1/auth/verify",{body:s,credentials:"include"})}e.verifyAuth=Ke;function Xe(s){return(0,i.postEndpoint)(a,"/v1/accounts",{body:s,credentials:"include"})}e.createAccount=Xe;function $e(s){return(0,i.getEndpoint)(a,"/v1/accounts/{address}",{path:{address:s},credentials:"include"})}e.getAccount=$e;function Qe(s){return(0,i.deleteEndpoint)(a,"/v1/accounts/{address}",{path:{address:s},credentials:"include"})}e.deleteAccount=Qe;function Ye(){return(0,i.getEndpoint)(a,"/v1/accounts/data-types")}e.getAccountDataTypes=Ye;function ze(s){return(0,i.getEndpoint)(a,"/v1/accounts/{address}/data-settings",{path:{address:s},credentials:"include"})}e.getAccountDataSettings=ze;function Je(s,c){return(0,i.putEndpoint)(a,"/v1/accounts/{address}/data-settings",{path:{address:s},body:c,credentials:"include"})}e.putAccountDataSettings=Je;function Ze(s){return(0,i.getEndpoint)(a,"/v1/chains/{chainId}/about/indexing",{path:{chainId:s}})}e.getIndexingStatus=Ze})(N);class Nn{constructor(n){this.communicator=n}async getBySafeTxHash(n){if(!n)throw new Error("Invalid safeTxHash");return(await this.communicator.send(f.getTxBySafeTxHash,{safeTxHash:n})).data}async signMessage(n){const t={message:n};return(await this.communicator.send(f.signMessage,t)).data}async signTypedMessage(n){if(!w(n))throw new Error("Invalid typed data");return(await this.communicator.send(f.signTypedMessage,{typedData:n})).data}async send({txs:n,params:t}){if(!n||!n.length)throw new Error("No transactions were passed");const i={txs:n,params:t};return(await this.communicator.send(f.sendTransactions,i)).data}}const g={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},A={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Dn{constructor(n){this.communicator=n,this.call=this.buildRequest({call:g.eth_call,formatters:[null,A.defaultBlockParam]}),this.getBalance=this.buildRequest({call:g.eth_getBalance,formatters:[null,A.defaultBlockParam]}),this.getCode=this.buildRequest({call:g.eth_getCode,formatters:[null,A.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:g.eth_getStorageAt,formatters:[null,A.blockNumberToHex,A.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:g.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:g.eth_getBlockByHash,formatters:[null,A.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:g.eth_getBlockByNumber,formatters:[A.blockNumberToHex,A.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:g.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:g.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:g.eth_getTransactionCount,formatters:[null,A.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:g.eth_gasPrice}),this.getEstimateGas=t=>this.buildRequest({call:g.eth_estimateGas})([t]),this.setSafeSettings=this.buildRequest({call:g.safe_setSettings})}buildRequest(n){const{call:t,formatters:i}=n;return async o=>{i&&Array.isArray(o)&&i.forEach((l,h)=>{l&&(o[h]=l(o[h]))});const a={call:t,params:o||[]};return(await this.communicator.send(f.rpcCall,a)).data}}}const Cn="0x1626ba7e",bn="0x20c13b0b",P=4001;class D extends Error{constructor(n,t,i){super(n),this.code=t,this.data=i,Object.setPrototypeOf(this,D.prototype)}}class te{constructor(n){this.communicator=n}async getPermissions(){return(await this.communicator.send(f.wallet_getPermissions,void 0)).data}async requestPermissions(n){if(!this.isPermissionRequestValid(n))throw new D("Permissions request is invalid",P);try{return(await this.communicator.send(f.wallet_requestPermissions,n)).data}catch{throw new D("Permissions rejected",P)}}isPermissionRequestValid(n){return n.every(t=>typeof t=="object"?Object.keys(t).every(i=>!!Object.values(b).includes(i)):!1)}}const H=(e,n)=>n.some(t=>t.parentCapability===e),Rn=()=>(e,n,t)=>{const i=t.value;return t.value=async function(){const o=new te(this.communicator);let a=await o.getPermissions();if(H(n,a)||(a=await o.requestPermissions([{[n]:{}}])),!H(n,a))throw new D("Permissions rejected",P);return i.apply(this)},t};var pn=function(e,n,t,i){var o=arguments.length,a=o<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,t):i,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,n,t,i);else for(var l=e.length-1;l>=0;l--)(d=e[l])&&(a=(o<3?d(a):o>3?d(n,t,a):d(n,t))||a);return o>3&&a&&Object.defineProperty(n,t,a),a};class ie{constructor(n){this.communicator=n}async getChainInfo(){return(await this.communicator.send(f.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(f.getSafeInfo,void 0)).data}async experimental_getBalances({currency:n="usd"}={}){return(await this.communicator.send(f.getSafeBalances,{currency:n})).data}async check1271Signature(n,t="0x"){const i=await this.getInfo(),o=B({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,t]}),a={call:g.eth_call,params:[{to:i.safeAddress,data:o},"latest"]};try{return(await this.communicator.send(f.rpcCall,a)).data.slice(0,10).toLowerCase()===Cn}catch{return!1}}async check1271SignatureBytes(n,t="0x"){const i=await this.getInfo(),o=B({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,t]}),a={call:g.eth_call,params:[{to:i.safeAddress,data:o},"latest"]};try{return(await this.communicator.send(f.rpcCall,a)).data.slice(0,10).toLowerCase()===bn}catch{return!1}}calculateMessageHash(n){return un(n)}calculateTypedMessageHash(n){const t=typeof n.domain.chainId=="object"?n.domain.chainId.toNumber():Number(n.domain.chainId);let i=n.primaryType;if(!i){const o=Object.values(n.types),a=Object.keys(n.types).filter(d=>o.every(l=>l.every(({type:h})=>h.replace("[","").replace("]","")!==d)));if(a.length===0||a.length>1)throw new Error("Please specify primaryType");i=a[0]}return an({message:n.message,domain:{...n.domain,chainId:t,verifyingContract:n.domain.verifyingContract,salt:n.domain.salt},types:n.types,primaryType:i})}async getOffChainSignature(n){return(await this.communicator.send(f.getOffChainSignature,n)).data}async isMessageSigned(n,t="0x"){let i;if(typeof n=="string"&&(i=async()=>{const o=this.calculateMessageHash(n);return await this.isMessageHashSigned(o,t)}),w(n)&&(i=async()=>{const o=this.calculateTypedMessageHash(n);return await this.isMessageHashSigned(o,t)}),i)return await i();throw new Error("Invalid message type")}async isMessageHashSigned(n,t="0x"){const i=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const o of i)if(await o(n,t))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(f.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(f.requestAddressBook,void 0)).data}}pn([Rn()],ie.prototype,"requestAddressBook",null);class Pn{constructor(n={}){const{allowedDomains:t=null,debug:i=!1}=n;this.communicator=new hn(t,i),this.eth=new Dn(this.communicator),this.txs=new Nn(this.communicator),this.safe=new ie(this.communicator),this.wallet=new te(this.communicator)}}const Mn=Object.freeze(Object.defineProperty({__proto__:null,MessageFormatter:C,get Methods(){return f},Operation:N.Operation,RPC_CALLS:g,get RestrictedMethods(){return b},TokenType:N.TokenType,TransactionStatus:N.TransactionStatus,TransferDirection:N.TransferDirection,default:Pn,getSDKVersion:F,isObjectEIP712TypedData:w},Symbol.toStringTag,{value:"Module"}));export{Mn as e};
